2018-07-26 14:41:09.148 [main] DEBUG com.imooc.o2o.O2oApplication - Running with Spring Boot v1.5.13.RELEASE, Spring v4.3.17.RELEASE
2018-07-25 23:59:22.192 [main] DEBUG com.imooc.o2o.O2oApplication - Running with Spring Boot v1.5.13.RELEASE, Spring v4.3.17.RELEASE
2018-07-26 00:00:00.691 [schedulerFactory_Worker-1] DEBUG c.i.o.d.ProductSellDailyDao.insertProductSellDaily - ==>  Preparing: INSERT INTO tb_product_sell_daily ( SELECT product_id, shop_id, create_time, count(product_id) AS total FROM tb_user_product_map WHERE date_format(create_time, '%Y-%m-%d') = date_sub(curdate(), INTERVAL 1 DAY) GROUP BY product_id,shop_id) 
2018-07-26 00:00:00.702 [schedulerFactory_Worker-1] DEBUG c.i.o.d.ProductSellDailyDao.insertProductSellDaily - ==> Parameters: 
2018-07-26 00:00:00.719 [schedulerFactory_Worker-1] DEBUG c.i.o.d.ProductSellDailyDao.insertProductSellDaily - <==    Updates: 3
2018-07-26 15:50:26.895 [main] DEBUG com.imooc.o2o.O2oApplication - Running with Spring Boot v1.5.13.RELEASE, Spring v4.3.17.RELEASE
2018-07-26 15:50:51.129 [http-nio-8060-exec-9] DEBUG c.i.o.dao.LocalAuthDao.queryLocalByUserNameAndPwd - ==>  Preparing: SELECT l.*,p.* FROM tb_local_auth l LEFT JOIN tb_person_info p ON l.user_id = p.user_id WHERE l.username = ? AND l.password = ? 
2018-07-26 15:50:51.139 [http-nio-8060-exec-9] DEBUG c.i.o.dao.LocalAuthDao.queryLocalByUserNameAndPwd - ==> Parameters: testbind(String), 25q2y22l06q99569529l52q26qqs2bq6(String)
2018-07-26 15:50:51.164 [http-nio-8060-exec-9] DEBUG c.i.o.dao.LocalAuthDao.queryLocalByUserNameAndPwd - <==      Total: 1
2018-07-26 15:50:51.549 [http-nio-8060-exec-2] DEBUG com.imooc.o2o.dao.ShopDao.queryShopList - ==>  Preparing: SELECT s.shop_id, s.shop_name, s.shop_desc, s.shop_addr, s.phone, s.shop_img, s.priority, s.create_time, s.edit_time, s.enable_status, s.advice, a.area_id, a.area_name, sc.shop_category_id, sc.shop_category_name FROM o2o.tb_shop s, o2o.tb_area a, o2o.tb_shop_category sc WHERE s.owner_id = ? AND s.area_id = a.area_id AND s.shop_category_id = sc.shop_category_id ORDER BY s.priority DESC LIMIT ?,? 
2018-07-26 15:50:51.550 [http-nio-8060-exec-2] DEBUG com.imooc.o2o.dao.ShopDao.queryShopList - ==> Parameters: 1(Long), 0(Integer), 100(Integer)
2018-07-26 15:50:51.566 [http-nio-8060-exec-2] DEBUG com.imooc.o2o.dao.ShopDao.queryShopList - <==      Total: 6
2018-07-26 15:50:51.567 [http-nio-8060-exec-2] DEBUG com.imooc.o2o.dao.ShopDao.queryShopCount - ==>  Preparing: SELECT count(1) FROM o2o.tb_shop s, o2o.tb_area a, o2o.tb_shop_category sc WHERE s.owner_id = ? AND s.area_id = a.area_id AND s.shop_category_id = sc.shop_category_id 
2018-07-26 15:50:51.567 [http-nio-8060-exec-2] DEBUG com.imooc.o2o.dao.ShopDao.queryShopCount - ==> Parameters: 1(Long)
2018-07-26 15:50:51.582 [http-nio-8060-exec-2] DEBUG com.imooc.o2o.dao.ShopDao.queryShopCount - <==      Total: 1
2018-07-26 15:50:53.912 [http-nio-8060-exec-8] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapList - ==>  Preparing: SELECT upm.user_product_id,upm.create_time,upm.point, buyer.user_id,buyer.name, s.shop_id,s.shop_name, p.product_id,p.product_name, operator.user_id AS operator_id, operator.name FROM tb_user_product_map upm,o2o.tb_person_info buyer,o2o.tb_shop s,o2o.tb_product p,o2o.tb_person_info operator WHERE upm.user_id = buyer.user_id and upm.shop_id = s.shop_id and upm.product_id = p.product_id and upm.operator_id = operator.user_id and upm.shop_id = ? order by upm.create_time DESC limit ?,?; 
2018-07-26 15:50:53.913 [http-nio-8060-exec-8] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapList - ==> Parameters: 1(Long), 0(Integer), 100(Integer)
2018-07-26 15:50:53.927 [http-nio-8060-exec-8] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapList - <==      Total: 3
2018-07-26 15:50:53.928 [http-nio-8060-exec-8] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapCount - ==>  Preparing: SELECT count(1) FROM tb_user_product_map upm,o2o.tb_person_info buyer, o2o.tb_shop s,o2o.tb_product p,o2o.tb_person_info operator WHERE upm.user_id = buyer.user_id and upm.shop_id = s.shop_id and upm.product_id = p.product_id and upm.operator_id = operator.user_id and upm.shop_id = ? 
2018-07-26 15:50:53.928 [http-nio-8060-exec-8] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapCount - ==> Parameters: 1(Long)
2018-07-26 15:50:53.940 [http-nio-8060-exec-8] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapCount - <==      Total: 1
2018-07-26 15:51:25.166 [http-nio-8060-exec-2] DEBUG com.imooc.o2o.dao.ShopDao.queryShopList - ==>  Preparing: SELECT s.shop_id, s.shop_name, s.shop_desc, s.shop_addr, s.phone, s.shop_img, s.priority, s.create_time, s.edit_time, s.enable_status, s.advice, a.area_id, a.area_name, sc.shop_category_id, sc.shop_category_name FROM o2o.tb_shop s, o2o.tb_area a, o2o.tb_shop_category sc WHERE s.owner_id = ? AND s.area_id = a.area_id AND s.shop_category_id = sc.shop_category_id ORDER BY s.priority DESC LIMIT ?,? 
2018-07-26 15:51:25.167 [http-nio-8060-exec-2] DEBUG com.imooc.o2o.dao.ShopDao.queryShopList - ==> Parameters: 1(Long), 0(Integer), 100(Integer)
2018-07-26 15:51:25.182 [http-nio-8060-exec-2] DEBUG com.imooc.o2o.dao.ShopDao.queryShopList - <==      Total: 6
2018-07-26 15:51:25.183 [http-nio-8060-exec-2] DEBUG com.imooc.o2o.dao.ShopDao.queryShopCount - ==>  Preparing: SELECT count(1) FROM o2o.tb_shop s, o2o.tb_area a, o2o.tb_shop_category sc WHERE s.owner_id = ? AND s.area_id = a.area_id AND s.shop_category_id = sc.shop_category_id 
2018-07-26 15:51:25.183 [http-nio-8060-exec-2] DEBUG com.imooc.o2o.dao.ShopDao.queryShopCount - ==> Parameters: 1(Long)
2018-07-26 15:51:25.194 [http-nio-8060-exec-2] DEBUG com.imooc.o2o.dao.ShopDao.queryShopCount - <==      Total: 1
2018-07-26 15:51:28.929 [http-nio-8060-exec-5] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapList - ==>  Preparing: SELECT upm.user_product_id,upm.create_time,upm.point, buyer.user_id,buyer.name, s.shop_id,s.shop_name, p.product_id,p.product_name, operator.user_id AS operator_id, operator.name FROM tb_user_product_map upm,o2o.tb_person_info buyer,o2o.tb_shop s,o2o.tb_product p,o2o.tb_person_info operator WHERE upm.user_id = buyer.user_id and upm.shop_id = s.shop_id and upm.product_id = p.product_id and upm.operator_id = operator.user_id and upm.shop_id = ? order by upm.create_time DESC limit ?,?; 
2018-07-26 15:51:28.930 [http-nio-8060-exec-5] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapList - ==> Parameters: 19(Long), 0(Integer), 100(Integer)
2018-07-26 15:51:28.941 [http-nio-8060-exec-5] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapList - <==      Total: 0
2018-07-26 15:51:28.942 [http-nio-8060-exec-5] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapCount - ==>  Preparing: SELECT count(1) FROM tb_user_product_map upm,o2o.tb_person_info buyer, o2o.tb_shop s,o2o.tb_product p,o2o.tb_person_info operator WHERE upm.user_id = buyer.user_id and upm.shop_id = s.shop_id and upm.product_id = p.product_id and upm.operator_id = operator.user_id and upm.shop_id = ? 
2018-07-26 15:51:28.942 [http-nio-8060-exec-5] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapCount - ==> Parameters: 19(Long)
2018-07-26 15:51:28.953 [http-nio-8060-exec-5] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapCount - <==      Total: 1
2018-07-26 15:51:31.521 [http-nio-8060-exec-6] DEBUG com.imooc.o2o.dao.ShopDao.queryShopList - ==>  Preparing: SELECT s.shop_id, s.shop_name, s.shop_desc, s.shop_addr, s.phone, s.shop_img, s.priority, s.create_time, s.edit_time, s.enable_status, s.advice, a.area_id, a.area_name, sc.shop_category_id, sc.shop_category_name FROM o2o.tb_shop s, o2o.tb_area a, o2o.tb_shop_category sc WHERE s.owner_id = ? AND s.area_id = a.area_id AND s.shop_category_id = sc.shop_category_id ORDER BY s.priority DESC LIMIT ?,? 
2018-07-26 15:51:31.521 [http-nio-8060-exec-6] DEBUG com.imooc.o2o.dao.ShopDao.queryShopList - ==> Parameters: 1(Long), 0(Integer), 100(Integer)
2018-07-26 15:51:31.541 [http-nio-8060-exec-6] DEBUG com.imooc.o2o.dao.ShopDao.queryShopList - <==      Total: 6
2018-07-26 15:51:31.542 [http-nio-8060-exec-6] DEBUG com.imooc.o2o.dao.ShopDao.queryShopCount - ==>  Preparing: SELECT count(1) FROM o2o.tb_shop s, o2o.tb_area a, o2o.tb_shop_category sc WHERE s.owner_id = ? AND s.area_id = a.area_id AND s.shop_category_id = sc.shop_category_id 
2018-07-26 15:51:31.542 [http-nio-8060-exec-6] DEBUG com.imooc.o2o.dao.ShopDao.queryShopCount - ==> Parameters: 1(Long)
2018-07-26 15:51:31.558 [http-nio-8060-exec-6] DEBUG com.imooc.o2o.dao.ShopDao.queryShopCount - <==      Total: 1
2018-07-26 15:51:47.928 [http-nio-8060-exec-10] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapList - ==>  Preparing: SELECT upm.user_product_id,upm.create_time,upm.point, buyer.user_id,buyer.name, s.shop_id,s.shop_name, p.product_id,p.product_name, operator.user_id AS operator_id, operator.name FROM tb_user_product_map upm,o2o.tb_person_info buyer,o2o.tb_shop s,o2o.tb_product p,o2o.tb_person_info operator WHERE upm.user_id = buyer.user_id and upm.shop_id = s.shop_id and upm.product_id = p.product_id and upm.operator_id = operator.user_id and upm.shop_id = ? order by upm.create_time DESC limit ?,?; 
2018-07-26 15:51:47.928 [http-nio-8060-exec-10] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapList - ==> Parameters: 23(Long), 0(Integer), 100(Integer)
2018-07-26 15:51:47.946 [http-nio-8060-exec-10] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapList - <==      Total: 1
2018-07-26 15:51:47.946 [http-nio-8060-exec-10] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapCount - ==>  Preparing: SELECT count(1) FROM tb_user_product_map upm,o2o.tb_person_info buyer, o2o.tb_shop s,o2o.tb_product p,o2o.tb_person_info operator WHERE upm.user_id = buyer.user_id and upm.shop_id = s.shop_id and upm.product_id = p.product_id and upm.operator_id = operator.user_id and upm.shop_id = ? 
2018-07-26 15:51:47.946 [http-nio-8060-exec-10] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapCount - ==> Parameters: 23(Long)
2018-07-26 15:51:47.956 [http-nio-8060-exec-10] DEBUG c.i.o.d.UserProductMapDao.queryUserProductMapCount - <==      Total: 1
2018-07-26 15:51:51.871 [http-nio-8060-exec-5] DEBUG c.i.o.d.S.queryShopAuthMapListByShopId - ==>  Preparing: SELECT smap.shop_auth_id, smap.title, smap.title_flag, smap.create_time, smap.edit_time, smap.enable_status, p.user_id, p.name, s.shop_id, s.shop_name FROM tb_shop_auth_map smap, o2o.tb_person_info p, o2o.tb_shop s WHERE smap.employee_id = p.user_id AND smap.shop_id = s.shop_id AND smap.shop_id = ? LIMIT ?, ?; 
2018-07-26 15:51:51.871 [http-nio-8060-exec-5] DEBUG c.i.o.d.S.queryShopAuthMapListByShopId - ==> Parameters: 23(Long), 0(Integer), 10(Integer)
2018-07-26 15:51:51.883 [http-nio-8060-exec-5] DEBUG c.i.o.d.S.queryShopAuthMapListByShopId - <==      Total: 0
2018-07-26 15:51:51.883 [http-nio-8060-exec-5] DEBUG c.i.o.d.ShopAuthMapDao.queryShopAuthCountByShopId - ==>  Preparing: SELECT count(1) FROM tb_shop_auth_map smap, o2o.tb_person_info p, o2o.tb_shop s WHERE smap.employee_id = p.user_id AND smap.shop_id = s.shop_id AND smap.shop_id = ? 
2018-07-26 15:51:51.884 [http-nio-8060-exec-5] DEBUG c.i.o.d.ShopAuthMapDao.queryShopAuthCountByShopId - ==> Parameters: 23(Long)
2018-07-26 15:51:51.894 [http-nio-8060-exec-5] DEBUG c.i.o.d.ShopAuthMapDao.queryShopAuthCountByShopId - <==      Total: 1
2018-07-26 15:51:54.055 [http-nio-8060-exec-8] DEBUG com.imooc.o2o.dao.ShopDao.queryShopList - ==>  Preparing: SELECT s.shop_id, s.shop_name, s.shop_desc, s.shop_addr, s.phone, s.shop_img, s.priority, s.create_time, s.edit_time, s.enable_status, s.advice, a.area_id, a.area_name, sc.shop_category_id, sc.shop_category_name FROM o2o.tb_shop s, o2o.tb_area a, o2o.tb_shop_category sc WHERE s.owner_id = ? AND s.area_id = a.area_id AND s.shop_category_id = sc.shop_category_id ORDER BY s.priority DESC LIMIT ?,? 
2018-07-26 15:51:54.056 [http-nio-8060-exec-8] DEBUG com.imooc.o2o.dao.ShopDao.queryShopList - ==> Parameters: 1(Long), 0(Integer), 100(Integer)
2018-07-26 15:51:54.071 [http-nio-8060-exec-8] DEBUG com.imooc.o2o.dao.ShopDao.queryShopList - <==      Total: 6
2018-07-26 15:51:54.073 [http-nio-8060-exec-8] DEBUG com.imooc.o2o.dao.ShopDao.queryShopCount - ==>  Preparing: SELECT count(1) FROM o2o.tb_shop s, o2o.tb_area a, o2o.tb_shop_category sc WHERE s.owner_id = ? AND s.area_id = a.area_id AND s.shop_category_id = sc.shop_category_id 
2018-07-26 15:51:54.073 [http-nio-8060-exec-8] DEBUG com.imooc.o2o.dao.ShopDao.queryShopCount - ==> Parameters: 1(Long)
2018-07-26 15:51:54.085 [http-nio-8060-exec-8] DEBUG com.imooc.o2o.dao.ShopDao.queryShopCount - <==      Total: 1
2018-07-26 17:33:53.570 [main] DEBUG com.imooc.o2o.dao.ProductSellDailyDaoTest - Running with Spring Boot v1.5.13.RELEASE, Spring v4.3.17.RELEASE
2018-07-26 17:34:02.490 [main] DEBUG c.i.o.d.ProductSellDailyDao.insertProductSellDaily - ==>  Preparing: INSERT INTO tb_product_sell_daily ( SELECT product_id, shop_id, date_format(create_time, '%Y-%m-%d'), count(product_id) AS total FROM tb_user_product_map WHERE date_format(create_time, '%Y-%m-%d') = date_sub(curdate(), INTERVAL 1 DAY) GROUP BY product_id, shop_id) 
2018-07-26 17:34:02.509 [main] DEBUG c.i.o.d.ProductSellDailyDao.insertProductSellDaily - ==> Parameters: 
2018-07-26 17:35:16.742 [main] DEBUG com.imooc.o2o.dao.ProductSellDailyDaoTest - Running with Spring Boot v1.5.13.RELEASE, Spring v4.3.17.RELEASE
2018-07-26 17:35:21.509 [main] DEBUG c.i.o.d.ProductSellDailyDao.insertProductSellDaily - ==>  Preparing: INSERT INTO tb_product_sell_daily ( SELECT product_id, shop_id, date_format(create_time, '%Y-%m-%d'), count(product_id) AS total FROM tb_user_product_map WHERE date_format(create_time, '%Y-%m-%d') = date_sub(curdate(), INTERVAL 1 DAY) GROUP BY product_id) 
2018-07-26 17:35:21.525 [main] DEBUG c.i.o.d.ProductSellDailyDao.insertProductSellDaily - ==> Parameters: 
2018-07-26 17:35:44.205 [main] DEBUG com.imooc.o2o.dao.ProductSellDailyDaoTest - Running with Spring Boot v1.5.13.RELEASE, Spring v4.3.17.RELEASE
2018-07-26 17:35:49.602 [main] DEBUG c.i.o.d.ProductSellDailyDao.insertProductSellDaily - ==>  Preparing: INSERT INTO tb_product_sell_daily(product_id, shop_id, create_time, total) ( SELECT product_id, shop_id, date_format(create_time, '%Y-%m-%d'), count(product_id) AS total FROM tb_user_product_map WHERE date_format(create_time, '%Y-%m-%d') = date_sub(curdate(), INTERVAL 1 DAY) GROUP BY product_id) 
2018-07-26 17:35:49.620 [main] DEBUG c.i.o.d.ProductSellDailyDao.insertProductSellDaily - ==> Parameters: 
2018-07-26 17:35:49.635 [main] DEBUG c.i.o.d.ProductSellDailyDao.insertProductSellDaily - <==    Updates: 3
2018-07-26 17:36:02.226 [main] DEBUG com.imooc.o2o.dao.ProductSellDailyDaoTest - Running with Spring Boot v1.5.13.RELEASE, Spring v4.3.17.RELEASE
2018-07-26 17:36:06.995 [main] DEBUG c.i.o.d.P.insertDefaultProductSellDaily - ==>  Preparing: INSERT INTO tb_product_sell_daily (product_id, shop_id, create_time, total) ( SELECT p.product_id, p.shop_id, date_sub(curdate(), INTERVAL 1 DAY), 0 AS total FROM o2o.tb_product p WHERE p.product_id NOT IN ( SELECT product_id FROM tb_product_sell_daily WHERE date_format(create_time, '%Y-%m-%d') = date_sub(curdate(), INTERVAL 1 DAY) ) ) 
2018-07-26 17:36:07.010 [main] DEBUG c.i.o.d.P.insertDefaultProductSellDaily - ==> Parameters: 
2018-07-26 17:36:07.022 [main] DEBUG c.i.o.d.P.insertDefaultProductSellDaily - <==    Updates: 10
